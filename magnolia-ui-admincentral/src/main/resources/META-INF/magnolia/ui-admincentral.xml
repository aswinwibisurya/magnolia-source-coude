<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module SYSTEM "module.dtd">
<module>
  <name>ui-admincentral</name>
  <displayName>Magnolia AdminCentral</displayName>
  <description>New Magnolia Administration GUI</description>
  <class>info.magnolia.ui.admincentral.module.AdminCentralModule</class>
  <versionHandler>info.magnolia.ui.admincentral.setup.AdminCentralModuleVersionHandler</versionHandler>
  <version>${project.version}</version>

  <components>
    <id>main</id>

    <component>
      <type>info.magnolia.ui.api.i18n.I18NAuthoringSupport</type>
      <workspace>config</workspace>
      <path>/server/i18n/authoring50</path>
      <observed>true</observed>
      <scope>singleton</scope>
    </component>

    <component>
      <type>info.magnolia.ui.framework.message.MessagesManager</type>
      <implementation>info.magnolia.ui.framework.message.MessagesManagerImpl</implementation>
    </component>

    <component>
      <type>info.magnolia.ui.framework.app.registry.ConfiguredAppDescriptorManager</type>
      <implementation>info.magnolia.ui.framework.app.registry.ConfiguredAppDescriptorManager</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.framework.app.registry.AppDescriptorRegistry</type>
      <implementation>info.magnolia.ui.framework.app.registry.AppDescriptorRegistry</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.framework.app.launcherlayout.AppLauncherLayoutManager</type>
      <implementation>info.magnolia.ui.framework.app.launcherlayout.AppLauncherLayoutManagerImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.dialog.registry.ConfiguredDialogDefinitionManager</type>
      <implementation>info.magnolia.ui.dialog.registry.ConfiguredDialogDefinitionManager</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.dialog.registry.DialogDefinitionRegistry</type>
      <implementation>info.magnolia.ui.dialog.registry.DialogDefinitionRegistry</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.form.field.registry.ConfiguredFieldTypeDefinitionManager</type>
      <implementation>info.magnolia.ui.form.field.registry.ConfiguredFieldTypeDefinitionManager</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.form.field.registry.FieldTypeDefinitionRegistry</type>
      <implementation>info.magnolia.ui.form.field.registry.FieldTypeDefinitionRegistry</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.message.registry.ConfiguredMessageViewDefinitionManager</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.message.registry.ConfiguredMessageViewDefinitionManager</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.message.registry.MessageViewDefinitionRegistry</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.message.registry.MessageViewDefinitionRegistry</implementation>
    </component>

    <type-mapping>
      <type>info.magnolia.ui.form.field.registry.FieldTypeDefinition</type>
      <implementation>info.magnolia.ui.form.field.registry.ConfiguredFieldTypeDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.message.definition.MessageViewDefinition</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.message.definition.ConfiguredMessageViewDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.framework.app.AppDescriptor</type>
      <implementation>info.magnolia.ui.framework.app.registry.ConfiguredAppDescriptor</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.framework.app.SubAppDescriptor</type>
      <implementation>info.magnolia.ui.framework.app.registry.ConfiguredSubAppDescriptor</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.contentapp.browser.BrowserSubAppDescriptor</type>
      <implementation>info.magnolia.ui.contentapp.browser.ConfiguredBrowserSubAppDescriptor</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.contentapp.detail.DetailSubAppDescriptor</type>
      <implementation>info.magnolia.ui.contentapp.detail.ConfiguredDetailSubAppDescriptor</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.contentapp.definition.EditorDefinition</type>
      <implementation>info.magnolia.ui.contentapp.definition.ConfiguredEditorDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.contentapp.definition.FormActionItemDefinition</type>
      <implementation>info.magnolia.ui.contentapp.definition.ConfiguredFormActionItemDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.workbench.definition.WorkbenchDefinition</type>
      <implementation>info.magnolia.ui.workbench.definition.ConfiguredWorkbenchDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.workbench.definition.NodeTypeDefinition</type>
      <implementation>info.magnolia.ui.workbench.definition.ConfiguredNodeTypeDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.form.definition.FormDefinition</type>
      <implementation>info.magnolia.ui.form.definition.ConfiguredFormDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.form.definition.FormActionDefinition</type>
      <implementation>info.magnolia.ui.form.definition.ConfiguredFormActionDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.dialog.definition.DialogDefinition</type>
      <implementation>info.magnolia.ui.dialog.definition.ConfiguredDialogDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.form.definition.TabDefinition</type>
      <implementation>info.magnolia.ui.form.definition.ConfiguredTabDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.form.field.definition.FieldDefinition</type>
      <implementation>info.magnolia.ui.form.field.definition.ConfiguredFieldDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.form.field.validation.FieldValidatorDefinition</type>
      <implementation>info.magnolia.ui.form.field.validation.ConfiguredFieldValidatorDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.framework.app.launcherlayout.definition.AppLauncherLayoutDefinition</type>
      <implementation>info.magnolia.ui.framework.app.launcherlayout.definition.ConfiguredAppLauncherLayoutDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.framework.app.launcherlayout.definition.AppLauncherGroupDefinition</type>
      <implementation>info.magnolia.ui.framework.app.launcherlayout.definition.ConfiguredAppLauncherGroupDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.framework.app.launcherlayout.definition.AppLauncherGroupEntryDefinition</type>
      <implementation>info.magnolia.ui.framework.app.launcherlayout.definition.ConfiguredAppLauncherGroupEntryDefinition</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.api.i18n.I18NAwareProperty</type>
      <implementation>info.magnolia.ui.admincentral.i18n.I18NAwarePropertyImpl</implementation>
    </type-mapping>

  </components>

  <components>
    <id>admincentral</id>

    <configurer>
      <class>info.magnolia.ui.framework.event.AdminCentralEventBusConfigurer</class>
    </configurer>
    <component>
      <type>info.magnolia.ui.form.action.DialogActionRegistry</type>
      <workspace>config</workspace>
      <path>/modules/ui-admincentral/dialogActionRegistry</path>
      <observed>true</observed>
      <scope>singleton</scope>
    </component>
    <component>
      <type>info.magnolia.ui.form.field.builder.DialogFieldRegistry</type>
      <workspace>config</workspace>
      <path>/modules/ui-admincentral/dialogFieldRegistry</path>
      <observed>true</observed>
      <scope>singleton</scope>
    </component>
    <component>
      <type>info.magnolia.ui.form.field.validation.ValidatorFieldRegistry</type>
      <workspace>config</workspace>
      <path>/modules/ui-admincentral/dialogFieldValidatorRegistry</path>
      <observed>true</observed>
      <scope>singleton</scope>
    </component>
    <component>
      <type>info.magnolia.ui.framework.location.LocationController</type>
      <implementation>info.magnolia.ui.framework.location.LocationController</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.framework.shell.Shell</type>
      <implementation>info.magnolia.ui.framework.shell.ShellImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.framework.app.AppController</type>
      <implementation>info.magnolia.ui.framework.app.AppControllerImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.framework.app.AppView</type>
      <implementation>info.magnolia.ui.framework.app.AppFrameView</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.ShellAppController</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.ShellAppController</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.applauncher.AppLauncherView</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.applauncher.AppLauncherViewImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.PulseView</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.PulseViewImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.favorites.FavoritesView</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.favorites.FavoritesViewImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.favorites.FavoritesPresenter</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.favorites.FavoritesPresenter</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.favorites.FavoritesManager</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.favorites.FavoritesManagerImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.AdmincentralPresenter</type>
      <implementation>info.magnolia.ui.admincentral.AdmincentralPresenter</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.message.PulseMessagesPresenter</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.message.PulseMessagesPresenter</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.message.PulseMessagesView</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.message.PulseMessagesViewImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.message.MessagePresenter</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.message.MessagePresenter</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.message.MessageView</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.message.MessageViewImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.shellapp.pulse.dashboard.PulseDashboardView</type>
      <implementation>info.magnolia.ui.admincentral.shellapp.pulse.dashboard.PulseDashboardViewImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.form.field.builder.FieldFactory</type>
      <implementation>info.magnolia.ui.form.field.builder.FieldFactory</implementation>
    </component>

    <type-mapping>
      <type>info.magnolia.ui.vaadin.form.FormView</type>
      <implementation>info.magnolia.ui.vaadin.form.ItemFormView</implementation>
    </type-mapping>
    <type-mapping>
      <type>info.magnolia.ui.framework.app.AppInstanceController</type>
      <implementation>info.magnolia.ui.framework.app.AppInstanceControllerImpl</implementation>
    </type-mapping>
  </components>

  <components>
    <id>app</id>
    <configurer>
      <class>info.magnolia.ui.framework.app.AppEventBusConfigurer</class>
    </configurer>

    <component>
      <type>info.magnolia.ui.vaadin.dialog.FormDialogView</type>
      <implementation>info.magnolia.ui.vaadin.dialog.FormDialog</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.workbench.ContentViewBuilder</type>
      <implementation>info.magnolia.ui.workbench.ContentViewBuilderImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.form.field.validation.ValidatorFieldFactory</type>
      <implementation>info.magnolia.ui.form.field.validation.ValidatorFieldFactory</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.imageprovider.definition.ImageProviderDefinition</type>
      <implementation>info.magnolia.ui.imageprovider.definition.ConfiguredImageProviderDefinition</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.imageprovider.ImageProvider</type>
      <implementation>info.magnolia.ui.imageprovider.DefaultImageProvider</implementation>
    </component>
  </components>

  <components>
    <id>subapp</id>
    <configurer>
      <class>info.magnolia.ui.framework.app.SubAppEventBusConfigurer</class>
    </configurer>
    <component>
      <type>info.magnolia.ui.api.action.ActionExecutor</type>
      <implementation>info.magnolia.ui.framework.app.action.SubAppActionExecutor</implementation>
    </component>


    <!-- Moved into subApp due to use of subApps EventBus -->
    <component>
      <type>info.magnolia.ui.dialog.FormDialogPresenter</type>
      <implementation>info.magnolia.ui.dialog.FormDialogPresenterImpl</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.form.field.builder.FieldFactory</type>
      <implementation>info.magnolia.ui.form.field.builder.FieldFactory</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.form.action.SaveFormActionDefinition</type>
      <implementation>info.magnolia.ui.form.action.SaveFormActionDefinition</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.vaadin.dialog.DialogView</type>
      <implementation>info.magnolia.ui.vaadin.dialog.BaseDialog</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.vaadin.dialog.FormDialogView</type>
      <implementation>info.magnolia.ui.vaadin.dialog.FormDialog</implementation>
    </component>
    <!-- The FormView is mapped twice because of it two use-cases:
    in admin-central scope without app-contexts visible and in app-scope, where the app-context is actually needed,
    so the interface has to be provided by the correct ComponentProvider.
    !-->
    <component>
      <type>info.magnolia.ui.vaadin.form.FormView</type>
      <implementation>info.magnolia.ui.vaadin.form.ItemFormView</implementation>
    </component>

    <component>
      <type>info.magnolia.ui.vaadin.form.FormViewReduced</type>
      <implementation>info.magnolia.ui.vaadin.form.Form</implementation>
    </component>
    <component>
      <type>info.magnolia.ui.admincentral.app.tools.EmbeddedPageView</type>
      <implementation>info.magnolia.ui.admincentral.app.tools.EmbeddedPageViewImpl</implementation>
    </component>
  </components>

  <dependencies>
    <dependency>
      <name>core</name>
      <version>5.0/*</version>
    </dependency>
    <dependency>
      <name>imaging</name>
      <version>3.0/*</version>
    </dependency>
  </dependencies>

  <servlets>
    <servlet>
      <name>AdminCentral</name>
      <class>info.magnolia.ui.admincentral.AdmincentralVaadinServlet</class>
      <mappings>
        <mapping>/.magnolia/admincentral</mapping>
        <mapping>/.magnolia/admincentral/*</mapping>
        <mapping>/VAADIN/*</mapping>
      </mappings>
      <params>
        <param>
          <name>UI</name>
          <value>info.magnolia.ui.admincentral.AdmincentralUI</value>
        </param>
        <param>
          <name>widgetset</name>
          <value>info.magnolia.ui.vaadin.gwt.MagnoliaWidgetSet</value>
        </param>
        <param>
          <name>caption</name>
          <value>Magnolia 5.0</value>
        </param>
        <param>
          <name>codeBasePath</name>
          <value>/.magnolia/admincentral</value>
        </param>
      </params>
    </servlet>
  </servlets>

  <repositories>
    <repository>
      <name>magnolia</name>
      <workspaces>
        <workspace>messages</workspace>
      </workspaces>
      <nodeTypeFile>/mgnl-nodetypes/magnolia-message-nodetypes.xml</nodeTypeFile>
    </repository>
    <repository>
      <name>magnolia</name>
      <workspaces>
        <workspace>profiles</workspace>
      </workspaces>
      <nodeTypeFile>/mgnl-nodetypes/magnolia-favorite-nodetypes.xml</nodeTypeFile>
    </repository>
  </repositories>
</module>
